<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>哔哩哔哩 (゜-゜)つロ 干杯~-bilibili</title>
    <link rel="shortcut icon" href="../../../static/image/favicon.ico">
    <link rel="stylesheet" type="text/css" href="../../../static/css/nav.css">
    <link rel="stylesheet" type="text/css" href="../../../static/css/base.css">
    <style>
        .nav {
            overflow: hidden;
            min-width: 1300px;
            position: absolute;
            z-index: 1;
            background: transparent;
            color: #fff;
            text-shadow: 0 1px 1px rgba(0, 0, 0, .3);
            font-weight: 500;
        }

        .nav-content {
            font-size: 16px;
        }

        .nav .nav-content .nav-link .bili-download-app::before {
            content: "\E72D";
            color: #fff;
            font-size: 18px;
        }

        #nav-search-form {
            background: #fff;
            border: 1px solid hsla(0, 0%, 100%, 0);
        }

        .nav-content .bilibili-main {
            display: flex;
            color: #fff;
        }

        .zhuzhan::before {
            content: "\E72B";
        }

        .zhuzhan {
            margin-right: 6px;
            font-size: 18px;
        }

        .nav-user-center {
            display: flex;
        }

        .nav-userCenter-ul a {
            color: #fff;
        }

        .bili-banner {
            margin: 0 auto;
            position: relative;
            z-index: 0;
            min-height: 155px;
            min-width: 999px;
            display: flex;
            justify-content: center;
        }

        .animated-banner {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            overflow: hidden;
        }

        .animated-banner>.layer {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .layer {
            display: flex;
        }

        .taper-line {
            display: flex;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
            width: 100%;
            height: 100px;
            background: linear-gradient(rgba(0, 0, 0, .4), transparent);
        }

        .b-wrap {
            width: 1300px;
        }

        .homepage-logo {
            position: relative;
            display: flex;
        }

        .hp-go {
            position: absolute;
            width: 220px;
            height: 50%;
            bottom: 10px;
            z-index: 1;
        }

        .hp-img {
            height: 100%;
        }

        .video-wrap {
            width: 1200px;
            height: 700px;
            background-color: #fff;
            margin: 30px auto;
        }

        .video-container1 {
            display: flex;

        }

        .sideshow {
            width: 500px;
            height: 300px;
            overflow: hidden;
            border-radius: 2px;
        }

        .sideshow .sideshow-pic {
            width: 100%;
            height: 100%;

        }

        .sideshow-box {
            position: relative;
            cursor: pointer;
        }

        .sideshow-pro {
            position: absolute;
            right: 10px;
            bottom: 10px;
        }

        .sideshow-pro>span {
            display: inline-block;
            margin-left: 10px;
            width: 10px;
            height: 10px;
            border: 2px solid transparent;
            border-radius: 50%;
            background-color: #fff;
            vertical-align: middle;
            cursor: pointer;
            transition: all .2s;
        }

        .sideshow-pro>span:hover {
            border: 2px solid #fff;
            background-color: #00a1d6;
            transform: scale(1.3);
        }

        #on {
            border-width: 0;
            border-color: transparent;
            background-color: transparent;
            background-image: url(../../../static/image/checked-pic.png);
            background-size: cover;
            background-repeat: no-repeat;
            transform: scale(1.8);
        }

        .video-box {
            display: flex;
            flex-wrap: wrap;
            margin-left: 9px;
        }

        .video-pre-box {
            margin-left: 10px;
            width: 220px;
            height: 144px;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .video-pre-box>img {
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .video-pre-box:hover .mask {
            top: 0;
            padding-top: 40px;
        }

        .mask {
            position: absolute;
            z-index: 2;
            width: 100%;
            height: 100%;
            top: 120px;
            left: 0;
            transition: top .2s;
            padding: 7px 10px 10px;
            background-color: rgba(0, 0, 0, .5);
            cursor: pointer;
        }

        .mask>p {
            font-size: 14px;
            line-height: 18px;
            height: 18px;
            color: #fff;
            margin-left: 10px;
            margin-bottom: 40px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-weight: 500;
        }

        .bili-up::before {
            content: "\E741";
        }

        #i9,
        #i10,
        #i11 {
            margin-top: 5px;
        }

        .guanggao {
            width: 100%;
            margin: 15px 0;
        }

        .guanggao>img {
            margin-top: 30px;
            width: 100%;
        }

        .list {
            position: fixed;
            right: 40px;
            top: 200px;
            text-align: center;
        }

        .list-box {
            padding-top: 6px;
            width: 40px;
            height: 100px;
            background-color: black;
            background: #fff;
            border: 1px solid #e7e7e7;
            border-radius: 10px;
            z-index: 2;
        }

        .ear {
            transform: translate(-5px, 5px);
        }

        .list-box>a {
            color: black;
        }

        .list-box>a>div {
            width: 100%;
            height: 24px;
            line-height: 24px;
            text-align: center;
            cursor: pointer;
            transition: all .2s;
            background: #fff;
            border-bottom: 1px solid #e7e7e7;

        }

        .tui {
            margin-top: 5px;
            border-top: 1px solid #e7e7e7;
        }

        .list-box>a>div:hover {
            background-color: #00a1d6;
            color: #fff;
        }

        #up {
            background-color: #00a1d6;
            color: #fff;
        }

        .video-container2 {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .video-container2 .video-pre-box {
            width: 230px;
            height: 144px;
            margin-left: 0;
        }
    </style>
</head>

<body>
    <div class="internationalHeader">
        <div class="nav">
            <div class="nav-content">
                <div>
                    <ul class="nav-link">
                        <li class="nav-link-li nav-link-main">
                            <a href="homePage.html" class="bilibili-main">
                                <div class="test bilifont zhuzhan"></div>主站
                            </a>
                        </li>
                        <li class="nav-link-li">番剧</li>
                        <li class="nav-link-li">游戏中心</li>
                        <li class="nav-link-li">直播</li>
                        <li class="nav-link-li">会员购</li>
                        <li class="nav-link-li">漫画</li>
                        <li class="nav-link-li">赛事</li>
                        <li class="bilifont nav-link-li bili-download-app">下载APP</li>
                    </ul>
                </div>
                <div id="nav-search">
                    <form id="nav-search-form">
                        <input class="nav-search-keywords" type="text" placeholder="满堂花醉三千客，一剑霜寒十四州。">
                        <div class="nav-search-btn">
                            <button class="bilifont nav-search-submit"></button>
                        </div>
                    </form>
                </div>
                <div id="nav-user-center">
                    <div class="nav-userCenter-ul" style="display: flex;">
                        <li class="user-login">
                            <a href="login.html" class="user-login">
                                <img class="logout-photo" src="../../../static/image/bili-head-photo.jpg">
                                登录
                            </a>
                        </li>
                        <li><a href="register.html">注册</a></li>
                        <li>
                            <a href="#" target="_blank" class="tougao">
                                <div class="user-contribute">投稿</div>
                            </a>
                        </li>
                    </div>
                    <div class="nav-userCenter-ul" style="display: none;">
                        <li class="user-login">
                            <a href="user.html" class="user-login">
                                <img class="logout-photo user-face" src="../../../static/image/bili-head-photo.jpg">
                            </a>
                        </li>
                        <li>
                            <a href="frame.html" target="_blank">
                                <div class="user-contribute">投稿</div>
                            </a>
                        </li>
                    </div>
                </div>
            </div>
        </div>
        <div class="bili-banner">
            <div class="animated-banner">
                <div class="layer">
                    <img src="../../../static/image/bg1.jpg" class="movePicture"
                        style="transform: scale(1) translate(0px) rotate(0deg); filter: blur(0px); opacity: 1;"
                        width="2016" height="155">
                </div>
                <div class="layer">
                    <img src="../../../static/image/bg2.jpg" class="movePicture"
                        style="transform: scale(1) translate(0px) rotate(0deg); filter: blur(0px); opacity: 1;"
                        width="2016" height="155">
                </div>
                <div class="layer">
                    <img src="../../../static/image/bg3.png" class="movePicture"
                        style="transform: scale(1) translate(40px, 16px) rotate(10deg); filter: blur(0px); opacity: 1;"
                        width="2400" height="184">
                </div>
                <div class="layer">
                    <video src="../../../static/video/bg4.webm" class="movePicture"
                        style="object-fit:cover;transform: scale(1) translate(0px) rotate(0deg); filter: blur(0px); opacity: 0;"
                        width="2016" height="155">
                </div>
                <div class="layer">
                    <img src="../../../static/image/bg5.png" class="movePicture"
                        style="transform: scale(1) translate(0px) rotate(0deg); filter: blur(0px); opacity: 0;"
                        width="2016" height="155">
                </div>
                <div class="layer">
                    <img src="../../../static/image/bg6.png" class="movePicture"
                        style="transform: scale(1) translate(0px) rotate(0deg); filter: blur(2px); opacity: 1;"
                        width="2016" height="155">
                </div>
                <div class="layer">
                    <img src="../../../static/image/bg7.png" class="movePicture"
                        style="transform: scale(1) translate(0px) rotate(0deg); filter: blur(2px); opacity: 1;"
                        width="2016" height="155">
                </div>
                <div class="layer">
                    <img src="../../../static/image/bg8.png" class="movePicture"
                        style="transform: scale(1) translate(0px) rotate(0deg); filter: blur(5px); opacity: 0;"
                        width="2016" height="155">
                </div>
            </div>
            <div class="taper-line"></div>
            <div class="homepage-logo b-wrap">
                <a class="hp-go" href="video.html?keywords=1">
                    <img class="hp-img" src="../../../static/image/homepage.png">
                </a>
            </div>
        </div>

    </div>
    <div class="video-wrap">
        <div class="video-container1" id="tuijian">
            <div class="sideshow-box">
                <div class="sideshow">
                    <img class="sideshow-pic" src="../../../static/image/corgi1.jpg">
                </div>
                <div class="sideshow-pro">
                    <span class="pic" id="on"></span>
                    <span class="pic"></span>
                    <span class="pic"></span>
                    <span class="pic"></span>
                    <span class="pic"></span>
                </div>
            </div>
            <div class="video-box">
                <div class="video-pre-box">
                    <img src="../../../static/image/corgi6.jpg">
                    <div class="mask">
                        <p class="title">柯基</p>
                        <p class="author-box">
                            <i class="bilifont bili-up"></i>
                            <span class="author">柯基</span>
                        </p>
                    </div>
                </div>
                <div class="video-pre-box">
                    <img id="i7" src="../../../static/image/corgi7.jpg">
                    <div class="mask">
                        <p class="title">柯基</p>
                        <p class="author-box">
                            <i class="bilifont bili-up"></i>
                            <span class="author">柯基</span>
                        </p>
                    </div>
                </div>
                <div class="video-pre-box">
                    <img id="i8" src="../../../static/image/corgi8.jpg">
                    <div class="mask">
                        <p class="title">柯基</p>
                        <p class="author-box">
                            <i class="bilifont bili-up"></i>
                            <span class="author">柯基</span>
                        </p>
                    </div>
                </div>
                <div class="video-pre-box">
                    <img id="i9" src="../../../static/image/corgi9.jpg">
                    <div class="mask">
                        <p class="title">柯基</p>
                        <p class="author-box">
                            <i class="bilifont bili-up"></i>
                            <span class="author">柯基</span>
                        </p>
                    </div>
                </div>
                <div class="video-pre-box">
                    <img id="i10" src="../../../static/image/corgi10.jpg">
                    <div class="mask">
                        <p class="title">柯基</p>
                        <p class="author-box">
                            <i class="bilifont bili-up"></i>
                            <span class="author">柯基</span>
                        </p>
                    </div>
                </div>
                <div class="video-pre-box">
                    <img id="i11" src="../../../static/image/corgi11.jpg">
                    <div class="mask">
                        <p class="title">柯基</p>
                        <p class="author-box">
                            <i class="bilifont bili-up"></i>
                            <span class="author">柯基</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="guanggao" id="guanggao">
            <img src="../../../static/image/广告.jpeg" alt="">
        </div>
        <div class="video-container2" id="shenghuo">
            <div class="video-pre-box">
                <img src="../../../static/image/corgi12.jpg">
                <div class="mask">
                    <p class="title">柯基</p>
                    <p class="author-box">
                        <i class="bilifont bili-up"></i>
                        <span class="author">柯基</span>
                    </p>
                </div>
            </div>
            <div class="video-pre-box">
                <img src="../../../static/image/corgi13.jpg">
                <div class="mask">
                    <p class="title">柯基</p>
                    <p class="author-box">
                        <i class="bilifont bili-up"></i>
                        <span class="author">柯基</span>
                    </p>
                </div>
            </div>
            <div class="video-pre-box last">
                <img src="../../../static/image/corgi14.jpg">
                <div class="mask">
                    <p class="title">柯基</p>
                    <p class="author-box">
                        <i class="bilifont bili-up"></i>
                        <span class="author">柯基</span>
                    </p>
                </div>
            </div>
            <div class="video-pre-box">
                <img src="../../../static/image/corgi15.jpg">
                <div class="mask">
                    <p class="title">柯基</p>
                    <p class="author-box">
                        <i class="bilifont bili-up"></i>
                        <span class="author">柯基</span>
                    </p>
                </div>
            </div>
            <div class="video-pre-box">
                <img src="../../../static/image/corgi16.jpg">
                <div class="mask">
                    <p class="title">柯基</p>
                    <p class="author-box">
                        <i class="bilifont bili-up"></i>
                        <span class="author">柯基</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div class="list">
        <div class="bilifont ear">&#59215;</div>
        <div class="list-box">
            <a href="#tuijian">
                <div class="tui" id="l-element">推荐</div>
            </a>
            <a href="#guanggao">
                <div id="l-element">广告</div>
            </a>
            <a href="#shenghuo">
                <div id="l-element">柯基</div>
            </a>
        </div>
    </div>
    <script>
        let animatedBanner = document.getElementsByClassName("internationalHeader")[0];
        let movePicture = document.getElementsByClassName("movePicture");
        let user_face = document.querySelectorAll(".user-face")
        animatedBanner.addEventListener('mouseenter', function (e) {
            a = e.pageX;
        })
        animatedBanner.addEventListener('mousemove', function (e) {
            let b = e.pageX;
            let x = a - b;
            let y = x / 1695 * 100;
            let z = x / 1695 * 135;
            //根据鼠标位移移动图片
            movePicture[0].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[1].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[3].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[4].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[2].style.transform = "translate(" + (40 + x / 1695 * 280) + "px," + (10 -
                x / 1695 * 6) + "px) rotate(" + (10 - x / 500) + "deg)"
            movePicture[5].style.transform = "translateX(" + (0 + z) + "px)"
            movePicture[6].style.transform = "translateX(" + (0 + z) + "px)"
            movePicture[7].style.transform = "translateX(" + (0 + z) + "px)"
            //透明度设置
            if (x >= 0 && y <= 25) {
                movePicture[1].style.opacity = 1 - y / 25
            }
            if (x > 0 && x < 800) {
                movePicture[2].style.opacity = 1 - x / 800
            }
            if (x <= 0 && y >= -33.4) {
                movePicture[3].style.opacity = 0 - y / 33.4
            }
            if (x <= 0 && y <= 67.2) {
                movePicture[4].style.opacity = 0 - y / 67.2
            }
            if (z >= 0 && z <= 45) {
                movePicture[6].style.opacity = 1 - z / 45
            }
            if (z <= 0 && z >= -45) {
                movePicture[7].style.opacity = 0 - z / 45
            }
        })
        animatedBanner.removeEventListener('mouseenter', function (e) {
            a = e.pageX
        })
        animatedBanner.removeEventListener('mousemove', function (e) {
            let b = e.pageX;
            let x = a - b;
            let y = x / 1695 * 100;
            let z = x / 1695 * 135;
            //根据鼠标位移移动图片
            movePicture[0].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[1].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[3].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[4].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[2].style.transform = "translate(" + (40 + x / 1695 * 280) + "px," + (10 -
                x / 1695 * 6) + "px)"
            movePicture[5].style.transform = "translateX(" + (0 + z) + "px)"
            movePicture[6].style.transform = "translateX(" + (0 + z) + "px)"
            movePicture[7].style.transform = "translateX(" + (0 + z) + "px)"
            //旋转角度设置
            movePicture[2].style.rotate = "(" + (10 - x / 1000) + "deg)"
            //透明度设置
            if (x >= 0 && y <= 25) {
                movePicture[1].style.opacity = 1 - y / 25
            }
            if (x > 0 && x < 800) {
                movePicture[2].style.opacity = 1 - x / 800
            }
            if (x <= 0 && y >= -33.4) {
                movePicture[3].style.opacity = 0 - y / 33.4
            }
            if (x <= 0 && y <= 67.2) {
                movePicture[4].style.opacity = 0 - y / 67.2
            }
            if (z >= 0 && z <= 45) {
                movePicture[6].style.opacity = 1 - z / 45
            }
            if (z <= 0 && z >= -45) {
                movePicture[7].style.opacity = 0 - z / 45
            }
        })
        animatedBanner.addEventListener('mouseleave', function (e) {
            let x = 0,
                y = 0,
                z = 0;
            movePicture[0].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[1].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[3].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[4].style.transform = "translateX(" + (0 + y) + "px)"
            movePicture[2].style.transform = "translate(" + (40 + x / 1695 * 280) + "px," + (10 -
                x / 1695 * 6) + "px) rotate(" + (10 - x / 100) + "deg)"
            movePicture[5].style.transform = "translateX(" + (0 + z) + "px)"
            movePicture[6].style.transform = "translateX(" + (0 + z) + "px)"
            movePicture[7].style.transform = "translateX(" + (0 + z) + "px)"
            //透明度设置
            if (x >= 0 && y <= 25) {
                movePicture[1].style.opacity = 1 - y / 25
            }
            if (x > 0 && x < 800) {
                movePicture[2].style.opacity = 1 - x / 800
            }
            if (x <= 0 && y >= -33.4) {
                movePicture[3].style.opacity = 0 - y / 33.4
            }
            if (x <= 0 && y <= 67.2) {
                movePicture[4].style.opacity = 0 - y / 67.2
            }
            if (z >= 0 && z <= 45) {
                movePicture[6].style.opacity = 1 - z / 45
            }
            if (z <= 0 && z >= -45) {
                movePicture[7].style.opacity = 0 - z / 45
            }
        })
        window.onload = function () {
            let userCen = document.querySelectorAll(".nav-userCenter-ul")
            console.log(userCen)
            fetch("http://118.178.190.150:80/cookie")
                .then(res => {
                    console.log(res)
                    a = res.clone().arrayBuffer()
                    return res.clone().json()
                })
                .then(res => {
                    console.log(res)
                    let tougao = document.querySelector(".tougao")
                    if (res.cookieValue) {
                        console.log(res)
                        userCen[0].style.display = "none"
                        userCen[1].style.display = "flex"
                        tougao.href = "frame.html"
                        //文件上传到服务器后获取头像
                        // let url = "../../../source/face" + res.cookieValue + ".jpg"
                        // if (url) {
                        //     for (let i = 0; i < user_face.length; i++) {
                        //         user_face[i].src = url
                        //     }
                        // }
                    } else {
                        tougao.href = "login.html"
                    }
                })
                .catch(
                    e => {
                        return a
                    }
                )
            let xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://118.178.190.150:80/bilibili/video/recommend');
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.send("number=20");
            xhr.onload = () => {
                let res = xhr.responseText;
                res = JSON.parse(res)
                let title = document.querySelectorAll(".title")
                let author = document.querySelectorAll(".author")
                let prebox = document.querySelectorAll(".video-pre-box")
                for (let i = 0; i < title.length; i++) {
                    let a = i + 5;
                    // title[i].innerText = res[a].Title;
                    // author[i].innerText = res[a].Author;
                    prebox[i].addEventListener('click', function () {
                        console.log(i)
                        let el = document.createElement("a");
                        document.body.appendChild(el);
                        el.href = "video.html?bv=" + (i + 5);
                        el.target = '_blank'; //指定在新窗口打开
                        el.click();
                        document.body.removeChild(el);
                    })
                }
            }
        }
        //轮播图实现
        let arrUrl = ["../../../static/image/corgi1.jpg", "../../../static/image/corgi2.jpg",
            "../../../static/image/corgi3.jpg", "../../../static/image/corgi4.jpg",
            "../../../static/image/corgi5.jpg"
        ];
        let sideshow_pic = document.querySelector(".sideshow-pic")
        let pic = document.querySelectorAll(".pic")
        let sideoshow_pro = document.querySelector(".sideshow-pro")
        let num = 0;
        let timer = null;
        for (var i = 0; i < arrUrl.length; i++) {
            pic[i].index = i;
            pic[i].onclick = function () {
                num = this.index;
                imgChange();
            }
        }
        setTimeout(autoPlay(), 1000)
        sideoshow_pro.addEventListener('mouseover', function () {
            clearInterval(timer);
        })
        sideoshow_pro.addEventListener('mouseout', autoPlay)

        function imgChange() {
            sideshow_pic.src = arrUrl[num]; //改变图片src位置
            for (var i = 0; i < pic.length; i++) { //改变原点样式
                pic[i].id = "";
            }
            pic[num].id = "on";
        }

        function autoPlay() {
            timer = setInterval(function () {
                num++;
                num %= arrUrl.length;
                imgChange();
            }, 3000);
        }
        //侧边栏
        let l_element = document.querySelectorAll("#l-element")
        for (let i = 0; i < l_element.length; i++) {
            l_element[i].addEventListener('click', function () {
                for (let j = 0; j < l_element.length; j++) {
                    l_element[j].id = ""
                }
                l_element[i].id = "up"
            })
        }
    </script>
</body>

</html>